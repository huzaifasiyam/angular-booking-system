<div class="row">
  <div class="col-lg-8 mx-auto">
    <div class="card shadow-none rounded-3 border-0">
      <div class="card-header border-0 bg-white text-center pb-0 pt-4">
        <h4 class="fw-bold text-secondary mb-2">{{ 'CHANGE PASSWORD' | translate }}</h4>
        <p class="text-muted small mb-0">{{ 'UPDATE YOUR PASSWORD TO KEEP YOUR ACCOUNT SECURE' | translate }}</p>
      </div>
      <div class="card-body p-4">
        <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
          <div class="mb-3">
            <label for="currentPassword" class="form-label" appRequiredLabel>{{ 'CURRENT PASSWORD' | translate }}</label>
            <div class="input-group">
              <input [type]="currentPasswordType"
                     class="form-control"
                     id="currentPassword"
                     formControlName="currentPassword"
                     [class.is-invalid]="isInvalid('currentPassword')"
                     [placeholder]="'CURRENT PASSWORD PLACEHOLDER' | translate">
              <app-password-toggle [show]="showCurrentPassword" (toggle)="showCurrentPassword = $event"></app-password-toggle>
              <div *ngIf="isInvalid('currentPassword')" class="invalid-feedback">
                {{ 'CURRENT PASSWORD IS REQUIRED' | translate }}
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label for="newPassword" class="form-label" appRequiredLabel>{{ 'NEW PASSWORD' | translate }}</label>
            <div class="input-group">
              <input [type]="newPasswordType"
                     class="form-control"
                     id="newPassword"
                     formControlName="newPassword"
                     [class.is-invalid]="isInvalid('newPassword')"
                     [placeholder]="'NEW PASSWORD PLACEHOLDER' | translate">
              <app-password-toggle [show]="showNewPassword" (toggle)="showNewPassword = $event"></app-password-toggle>
              <div *ngIf="isInvalid('newPassword')" class="invalid-feedback">
                <ng-container *ngIf="passwordForm.get('newPassword')?.errors?.['required']">
                  {{ 'NEW PASSWORD IS REQUIRED' | translate }}
                </ng-container>
                <ng-container *ngIf="passwordForm.get('newPassword')?.errors?.['minlength']">
                  {{ 'PASSWORD MUST BE AT LEAST 6 CHARACTERS LONG' | translate }}
                </ng-container>
              </div>
            </div>

            <app-password-strength [passwordToCheck]="newPassword?.value" (passwordStrength)="isStrongPassword = $event">
            </app-password-strength>
          </div>

          <div class="mb-3">
            <label for="confirmNewPassword" class="form-label" appRequiredLabel>{{ 'CONFIRM NEW PASSWORD' | translate }}</label>
            <div class="input-group">
              <input [type]="confirmPasswordType"
                     class="form-control"
                     id="confirmNewPassword"
                     formControlName="confirmNewPassword"
                     [class.is-invalid]="isInvalid('confirmNewPassword')"
                     [placeholder]="'CONFIRM NEW PASSWORD PLACEHOLDER' | translate">

              <app-password-toggle [show]="showConfirmPassword" (toggle)="showConfirmPassword = $event"></app-password-toggle>

              <div *ngIf="isInvalid('confirmNewPassword')" class="invalid-feedback">
                <ng-container *ngIf="passwordForm.get('confirmNewPassword')?.errors?.['required']">
                  {{ 'CONFIRM NEW PASSWORD IS REQUIRED' | translate }}
                </ng-container>
                <ng-container *ngIf="passwordForm.errors?.['passwordMismatch']">
                  {{ 'PASSWORDS DO NOT MATCH' | translate }}
                </ng-container>
              </div>
            </div>
          </div>

          <div class="text-end mt-4">
            <button type="submit" class="btn btn-primary px-4" [disabled]="passwordForm.invalid || !isStrongPassword">
              <i class="fa fa-save me-2"></i> {{ 'SAVE CHANGES' | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>