<div class="inner-section d-flex align-items-center justify-content-center">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5">
        <div class="card p-4 rounded-3 shadow-sm ">
          <div class="card-body">
            
            <!-- Header -->
            <div class="text-center mb-4">
              <h3 class="fw-bold text-primary mb-1">Set Your Password</h3>
              <p class="text-muted small">Create a strong password to secure your account</p>
            </div>

            <!-- Form -->
            <form [formGroup]="setPasswordForm" (ngSubmit)="onSetPassword()">
              
              <!-- New Password -->
              <div class="mb-3">
                <label for="newPassword" class="form-label fw-semibold">New Password</label>
                <div class="input-group">
                  <input
                    [type]="showPassword ? 'text' : 'password'"
                    class="form-control"
                    id="newPassword"
                    formControlName="newPassword"
                    placeholder="Enter new password"
                    [ngClass]="{ 'is-invalid': newPassword?.invalid && (newPassword?.dirty || newPassword?.touched) }"
                  />
                  <app-password-toggle 
                    [show]="showPassword" 
                    (toggle)="showPassword = $event">
                  </app-password-toggle>
                </div>
                <div *ngIf="newPassword?.invalid && (newPassword?.dirty || newPassword?.touched)" class="invalid-feedback d-block">
                  <div *ngIf="newPassword?.errors?.['required']">Password is required.</div>
                  <div *ngIf="newPassword?.errors?.['minlength']">Password must be at least 6 characters.</div>
                </div>

                <app-password-strength [passwordToCheck]="newPassword?.value" 
                       (passwordStrength)="isStrongPassword = $event">
                </app-password-strength>
              </div>

              <!-- Confirm Password -->
              <div class="mb-3">
                <label for="confirmPassword" class="form-label fw-semibold">Confirm Password</label>
                <div class="input-group">
                  <input
                    [type]="showConfirmPassword ? 'text' : 'password'"
                    class="form-control"
                    id="confirmPassword"
                    formControlName="confirmPassword"
                    placeholder="Re-enter new password"
                    [ngClass]="{ 'is-invalid': confirmPassword?.invalid && (confirmPassword?.dirty || confirmPassword?.touched) }"
                  />
                  <app-password-toggle 
                    [show]="showConfirmPassword" 
                    (toggle)="showConfirmPassword = $event">
                  </app-password-toggle>
                </div>
                <div *ngIf="confirmPassword?.invalid && (confirmPassword?.dirty || confirmPassword?.touched)" class="invalid-feedback d-block">
                  <div *ngIf="confirmPassword?.errors?.['required']">Confirm Password is required.</div>
                  <div *ngIf="confirmPassword?.errors?.['mismatch']">Passwords do not match.</div>
                </div>
              </div>

              <!-- Submit Button -->
              <div class="d-grid mt-4">
                <button
                  type="submit"
                  class="btn btn-primary btn-lg fw-semibold shadow-sm"
                  [disabled]="setPasswordForm.invalid || !isStrongPassword"
                >
                  Set Password
                </button>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
