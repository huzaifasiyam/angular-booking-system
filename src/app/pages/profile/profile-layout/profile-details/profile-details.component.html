<div class="row">
  <div class="col-lg-12 mx-auto">
    <div class="card shadow-none rounded-3 border-0">
      <div class="card-header border-0 bg-white text-center pb-0">
        <h4 class="fw-bold text-secondary mb-2">{{ 'EDIT PROFILE' | translate }}</h4>
        <p class="text-muted small mb-0">{{ 'UPDATE YOUR PERSONAL AND ADDRESS DETAILS' | translate }}</p>
      </div>

      <div *ngIf="loading" class="p-4">
        <ngx-skeleton-loader count="1" appearance="line" [theme]="{ height: '25px', width: '200px', 'margin-bottom': '10px' }"></ngx-skeleton-loader>
        <ngx-skeleton-loader count="2" appearance="line" [theme]="{ height: '18px', 'margin-bottom': '10px' }"></ngx-skeleton-loader>
        <ngx-skeleton-loader count="6" appearance="line" [theme]="{ height: '40px', 'border-radius': '8px', 'margin-bottom': '15px' }"></ngx-skeleton-loader>
      </div>

      <div class="card-body" *ngIf="!loading">
        <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
          
          <ng-template #personalInfoTitle>
            <div class="d-flex align-items-center">
              <div class="icon-badge me-2 text-primary">
                <i class="fa fa-user"></i>
              </div>
              <h6 class="mb-0 fw-semibold text-secondary">{{ 'PERSONAL INFORMATION' | translate }}</h6>
            </div>
          </ng-template>

          <app-bootstrap-accordion [titleTemplate]="personalInfoTitle">
            <div formGroupName="personalInfo" class="row g-3 mt-2">
              <div class="col-md-3">
                <label class="form-label" appRequiredLabel>{{ 'FIRST NAME' | translate }}</label>
                <input type="text" class="form-control" formControlName="firstName"
                       [class.is-invalid]="isInvalid(personalInfo,'firstName')"
                       [placeholder]="'FIRST NAME PLACEHOLDER' | translate">
                <div class="invalid-feedback">{{ 'FIRST NAME IS REQUIRED' | translate }}</div>
              </div>
              <div class="col-md-3">
                <label class="form-label">{{ 'MIDDLE NAME' | translate }}</label>
                <input type="text" class="form-control" formControlName="middleName"
                       [placeholder]="'MIDDLE NAME PLACEHOLDER' | translate">
              </div>
              <div class="col-md-3">
                <label class="form-label" appRequiredLabel>{{ 'LAST NAME' | translate }}</label>
                <input type="text" class="form-control" formControlName="lastName"
                       [class.is-invalid]="isInvalid(personalInfo,'lastName')"
                       [placeholder]="'LAST NAME PLACEHOLDER' | translate">
                <div class="invalid-feedback">{{ 'LAST NAME IS REQUIRED' | translate }}</div>
              </div>
             <div class="col-md-3">
                <label class="form-label" appRequiredLabel>{{ 'GENDER' | translate }}</label>
                <div class="d-flex gap-1 ">
                  <div class="form-check" *ngFor="let g of genderOptions">
                    <input class="form-check-input"
                           type="radio"
                           [id]="'gender-' + g.listId"
                           [value]="g.listId"
                           formControlName="gender"
                           [class.is-invalid]="isInvalid(personalInfo,'gender')">
                    <label class="form-check-label" [for]="'gender-' + g.listId">
                      {{ g.listValue | translate }}
                    </label>
                  </div>
                </div>
                <div class="invalid-feedback d-block" *ngIf="isInvalid(personalInfo,'gender')">
                   {{ 'GENDER IS REQUIRED' | translate }}
                </div>
              </div>
              <div class="col-md-4">
                <label class="form-label" appRequiredLabel>{{ 'MOBILE NUMBER' | translate }}</label>
                <app-mobile-input formControlName="mobileNumber"
                                  [ngClass]="{ 'is-invalid': isInvalid(personalInfo,'mobileNumber') }"
                                  >
                </app-mobile-input>
                <div class="invalid-feedback">
                  {{ 'PLEASE ENTER A VALID 10-DIGIT NUMBER' | translate }}
                </div>
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ 'PHONE NUMBER' | translate }}</label>
                <input type="tel" class="form-control" formControlName="phoneNumber"
                       [placeholder]="'PHONE NUMBER PLACEHOLDER' | translate">
              </div>
              <div class="col-md-4">
                <label class="form-label" appRequiredLabel>{{ 'EMAIL ADDRESS' | translate }}</label>
                <input type="email" class="form-control" formControlName="email" readonly
                       [placeholder]="'EMAIL ADDRESS PLACEHOLDER' | translate">
              </div>
            </div>
          </app-bootstrap-accordion>

          <ng-template #addressInfoTitle>
            <div class="d-flex align-items-center w-100">
              <div class="icon-badge me-2 text-white">
                <i class="fa fa-home"></i>
              </div>
              <h6 class="mb-0 fw-semibold text-secondary">{{ 'ADDRESS DETAILS' | translate }}</h6>
              <small class="ms-auto text-muted fst-italic">({{ 'OPTIONAL' | translate }})</small>
            </div>
          </ng-template>

          <app-bootstrap-accordion [titleTemplate]="addressInfoTitle">
            <div formGroupName="addressDetails" class="row g-3 mt-2">
              <div class="col-12">
                <label class="form-label">{{ 'ADDRESS LINE 1' | translate }}</label>
                <input type="text" class="form-control" formControlName="addressLine1"
                       [placeholder]="'ADDRESS LINE 1 PLACEHOLDER' | translate">
              </div>
              <div class="col-12">
                <label class="form-label">{{ 'ADDRESS LINE 2' | translate }}</label>
                <input type="text" class="form-control" formControlName="addressLine2"
                       [placeholder]="'ADDRESS LINE 2 PLACEHOLDER' | translate">
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'COUNTRY' | translate }}</label>
                <input type="text" class="form-control" formControlName="country"
                       [placeholder]="'COUNTRY PLACEHOLDER' | translate">
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'CITY' | translate }}</label>
                <input type="text" class="form-control" formControlName="city"
                       [placeholder]="'CITY PLACEHOLDER' | translate">
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'PINCODE' | translate }}</label>
                <input type="text" class="form-control" formControlName="pincode"
                       [class.is-invalid]="isInvalid(addressDetails,'pincode')"
                       [placeholder]="'PINCODE PLACEHOLDER' | translate">
                <div class="invalid-feedback">{{ 'ENTER VALID 6-DIGIT PINCODE' | translate }}</div>
              </div>
            </div>
          </app-bootstrap-accordion>

          <div class="text-end mt-4">
            <button type="submit" class="btn btn-primary px-4" [disabled]="profileForm.invalid">
              <i class="fa fa-save me-2"></i> {{ 'SAVE CHANGES' | translate }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>